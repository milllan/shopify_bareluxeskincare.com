!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e){var i=function(e,i){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,i||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"===t(i)?i:String(i)}customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){var t,i,o;super(),t=this,o=t=>{const e=t?"add":"remove";this.form.closest(".product-form").classList[e]("adding")},(i=e(i="toggleSpinner"))in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,this.selectors={form:"form",inputId:"[name=id]",submitButton:'[name="add"]',errorWrapper:".prod__form-error",customFields:["[data-product-custom-field]"],dynamicCheckout:".prod__dynamic_checkout"},this.domNodes=queryDomNodes(this.selectors,this),this.form=this.domNodes.form,this.submitButton=this.domNodes.submitButton,this.domNodes.inputId.disabled=!1,this.notificationType=this.dataset.notificationType,this.customFields=document.querySelectorAll(this.selectors.customFields),this.domNodes.dynamicCheckout&&(this.enable_dynamic_checkout=!0),this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.domNodes.dynamicCheckout&&this.customFields&&this.domNodes.dynamicCheckout.addEventListener("click",(t=>{validateForm(this.form.closest(".main-product__blocks")).length>0&&(t.stopPropagation(),window.MinimogTheme.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:window.MinimogStrings.requiredField,delay:100}))}),!0)}onSubmitHandler(t){t.preventDefault(),this.toggleSpinner(!0);const e=validateForm(this.form.closest(".main-product__blocks"));var i;if((null==e?void 0:e.length)>0)return this.toggleSpinner(!1),window.MinimogTheme.Notification.show({target:null==this||null===(i=this.domNodes)||void 0===i?void 0:i.errorWrapper,method:"appendChild",type:"warning",message:window.MinimogStrings.requiredField});const o={method:"POST",headers:{Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"}},n=new FormData(this.form);o.body=n;const{MinimogSettings:r,MinimogStrings:s}=window;r.use_ajax_atc?fetch(`${r.routes.cart_add_url}`,o).then((t=>t.json())).then((t=>{if(t.status)return window.MinimogTheme.Notification.show({target:"toast"===this.notificationType?document.body:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:t.description,last:3e3,sticky:"toast"===this.notificationType});r.enable_cart_drawer||window.MinimogTheme.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"success",message:window.MinimogStrings.itemAdded,last:3e3,sticky:"toast"===this.notificationType}),window.MinimogEvents.emit("ON_ITEM_ADDED",t),window.Shopify.onItemAdded(t)})).catch((t=>{})).finally((()=>{this.toggleSpinner(!1)})):fetch(`${r.routes.cart_add_url}`,o).then((t=>t.json())).then((t=>{if(t.status)return window.MinimogTheme.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:t.description,last:3e3});r.use_ajax_atc,window.MinimogEvents.emit("ON_ITEM_ADDED",t),window.Shopify.onItemAdded(t)})).catch((t=>{})).finally((()=>{this.toggleSpinner(!1)}))}})}();