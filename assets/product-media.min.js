!function(){var e,t,i={4558:function(e,t,i){"use strict";i.d(t,{LE:function(){return a},gM:function(){return r}});var s=i(8971);i(9280);window.MinimogEvents=window.MinimogEvents||new s.Z,window._ThemeEvent=window.MinimogEvents,window.MinimogLibs.loadjs=__loadjs;window.MinimogEvents;const a=window.MinimogTheme||{},r=(window.MinimogSettings,window.MinimogStrings,window.MinimogLibs||{})},9280:function(){__loadjs=function(){var e=function(){},t={},i={},s={};function a(e,t){if(e){var a=s[e];if(i[e]=t,a)for(;a.length;)a[0](e,t),a.splice(0,1)}}function r(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function o(t,i,s,a){var r,n,d=document,l=s.async,c=(s.numRetries||0)+1,u=s.before||e,h=t.replace(/[\?|#].*$/,""),m=t.replace(/^(css|img)!/,"");a=a||0,/(^css!|\.css$)/.test(h)?((n=d.createElement("link")).rel="stylesheet",n.href=m,(r="hideFocus"in n)&&n.relList&&(r=0,n.rel="preload",n.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(n=d.createElement("img")).src=m:((n=d.createElement("script")).src=t,n.async=void 0===l||l),!(n.onload=n.onerror=n.onbeforeload=function(e){var d=e.type[0];if(r)try{n.sheet.cssText.length||(d="e")}catch(e){18!=e.code&&(d="e")}if("e"==d){if((a+=1)<c)return o(t,i,s,a)}else if("preload"==n.rel&&"style"==n.as)return n.rel="stylesheet";i(t,d,e.defaultPrevented)})!==u(t,n)&&d.head.appendChild(n)}function n(e,i,s){var n,d;if(i&&i.trim&&(n=i),d=(n?s:i)||{},n){if(n in t)throw"LoadJS";t[n]=!0}function l(t,i){!function(e,t,i){var s,a,r=(e=e.push?e:[e]).length,n=r,d=[];for(s=function(e,i,s){if("e"==i&&d.push(e),"b"==i){if(!s)return;d.push(e)}--r||t(d)},a=0;a<n;a++)o(e[a],s,i)}(e,(function(e){r(d,e),t&&r({success:t,error:i},e),a(n,e)}),d)}if(d.returnPromise)return new Promise(l);l()}return n.ready=function(e,t){return function(e,t){e=e.push?e:[e];var a,r,o,n=[],d=e.length,l=d;for(a=function(e,i){i.length&&n.push(e),--l||t(n)};d--;)r=e[d],(o=i[r])?a(r,o):(s[r]=s[r]||[]).push(a)}(e,(function(e){r(t,e)})),n},n.done=function(e){a(e,[])},n.reset=function(){t={},i={},s={}},n.isDefined=function(e){return e in t},n}()},8971:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});class s{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),()=>this.unSubscribe(e,t)}unSubscribe(e,t){const i=this.events[e];if(i&&Array.isArray(i))for(let e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];(this.events[e]||[]).forEach((e=>{e(...i)}))}}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return i[e](r,r.exports,a),r.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e=a(4558).gM,t=a(4558).LE,customElements.get("media-gallery")||customElements.define("media-gallery",class extends HTMLElement{constructor(){super(),this.selectors={container:".sf-product-wrapper",slider:".swiper-container",sliderMobile:".swiper-container.f-media-mobile",sliderPagination:".swiper-pagination",sliderPrevEl:".swiper-button-prev",sliderNextEl:".swiper-button-next",navSlider:".nav-swiper-container",medias:[".sf-prod-media-item"],mediaWrapper:".sf-prod-media__wrapper",mediaZoomIns:[".sf-prod-media__zoom-in"],navSliderMobile:".nav-swiper-container-mobile",videos:[".media-video"],productBlock:".sf-prod__block",mediaMobile:".sf-product-media__mobile",variantIdNode:'.main-product-form [name="id"]'},this.container=this.closest(this.selectors.container),this.domNodes=queryDomNodes(this.selectors,this),this.enableVideoAutoplay="true"===this.dataset.enableVideoAutoplay,this.enableImageZoom="true"===this.dataset.enableImageZoom,this.enableVariantGroupImages="true"===this.dataset.enableVariantGroupImages,this.closest(".sf-prod__block")&&(this.view=this.closest(".sf-prod__block").dataset.view||"product-template"),this.section=this.closest(`[data-section-id="${this.sectionId}"]`),this.layout=this.dataset.layout,this.setupData()}async init(){switch(this.view){case"product-template":await this.initSlider(),this.enableVariantGroupImages||(this.addEventToMainMedias(),this.initLightbox()),"slider"!==this.mediaMode&&(this.mediaMode="gallery");break;case"featured-product":this.initSlider();break;case"card":case"sticky-atc":this.mediaMode="featured-image";break;case"quick-view":this.mediaMode="featured-image",this.initSlider()}if("slider"===this.mediaMode){const e=this.querySelector(".swiper-wrapper").firstElementChild,t=e.dataset.mediaType;if("video"===t||"external_video"==t){const t=e.querySelector(".deferred-media"),i="true"===t.dataset.autoPlay;t&&i&&t.loadContent(!1)}}else{const e=this.querySelectorAll(".sf-prod-media-item");e&&e.forEach((e=>{const t=e.dataset.mediaType;if("video"===t||"external_video"===t){const t=e.querySelector(".deferred-media"),i="true"===t.dataset.autoPlay;t&&i&&t.loadContent(!1)}}))}}getProductJson(e){return fetch(e+".js").then((function(e){return e.json()}))}async setupData(){this.productHandle=this.dataset.productHandle,this.productUrl=this.dataset.productUrl,this.productData=await this.getProductJson(this.productUrl);const{productData:e,productData:{variants:t}={}}=this,i=this.container.querySelector(this.selectors.variantIdNode);if(e&&i){let s=Number(i.value);s||(s=e.selected_or_first_available_variant.id);const a=t.find((e=>e.id===s))||t[0];this.productData.initialVariant=a,!this.productData.selected_variant&&i.dataset.selectedVariant&&(this.productData.selected_variant=t.find((e=>e.id===Number(i.dataset.selectedVariant))))}this.init()}initSlider(){if(!this.domNodes.slider)return;this.mediaMode="slider";const{domNodes:{slider:i,sliderPagination:s,navSlider:a,sliderNextEl:r,sliderPrevEl:o}}=this;let n=0,d={},l={};this.productData.initialVariant&&this.productData.selected_variant&&(n=this.productData.initialVariant.featured_media.position-1||0),d={loop:!1,initialSlide:n,slidesPerView:5,freeMode:!0,spaceBetween:10,threshold:2,watchSlidesVisibility:!0,watchSlidesProgress:!0,direction:"layout-6"===this.layout?"vertical":"horizontal",on:{init:()=>a.style.opacity=1}},this.navSlider=a?new e.Swiper(a,d):null;const c=this.navSlider?{thumbs:{swiper:this.navSlider}}:{};l=Object.assign({},getProductSliderConfig(this.layout),{initialSlide:n,autoHeight:!0,navigation:{nextEl:r,prevEl:o},threshold:2,loop:!this.enableVariantGroupImages,pagination:{el:s,clickable:!0,type:"bullets"},...c,on:{init:()=>{i.style.opacity=1,this.domNodes=queryDomNodes(this.selectors,this.container)}}}),"product-template"===this.view?(t.config.mqlMobile?"mobile"===this.dataset.screen&&(this.slider=new e.Swiper(i,l)):"desktop"===this.dataset.screen&&(this.slider=new e.Swiper(i,l)),document.addEventListener("matchMobile",(()=>{"mobile"===this.dataset.screen&&(this.slider=new e.Swiper(i,l))})),document.addEventListener("unmatchMobile",(()=>{"desktop"===this.dataset.screen&&(this.slider=new e.Swiper(i,l))}))):this.slider=new e.Swiper(i,l),this.enableVariantGroupImages||this.handleSlideChange()}handleSlideChange(){if(!this.slider)return;let e=!0,t="",i=[];this.slider.on("slideChange",(s=>{try{const{slides:a,activeIndex:r}=s;this.playActiveMedia(a[r]),i=[r],"layout-5"!==this.layout&&"layout-7"!==this.layout||i.push(r+1);for(let e of i){const i=a[e];if(t=i.dataset.mediaType,"model"===t)break}"model"===t?(this.slider.allowTouchMove=!1,e=!1):(e||(this.slider.allowTouchMove=!0),e=!0)}catch(e){}}))}playActiveMedia(e){const t=e.querySelector(".deferred-media");t&&"true"===t.dataset.autoPlay&&t.loadContent(!1)}initLightbox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.productData.media;this.enableImageZoom&&loadAssets(["glightbox.css","glightbox.js"]).then((()=>{const i=t.map((e=>{if("image"===e.media_type)return{href:e.src,type:"image",id_media:e.id};if("external_video"===e.media_type)return{href:window.MinimogLibs.getVideoURL(e.external_id,e.host),type:"video",source:e.host,id_media:e.id};if("video"===e.media_type)return{href:e.sources[0].url,type:"video"};if("model"===e.media_type){const t=document.querySelector(`.media-model[data-media-id="${e.id}"]`).cloneNode(!0);return t.classList.remove("hidden"),t.classList.add("model-in-lightbox"),{content:t,width:"80vw",height:"70vh",id_media:e.id}}}));this.lightbox=new e.GLightbox({elements:i,openEffect:"fade",closeEffect:"fade",draggable:!1,autofocusVideos:!0})})).catch((e=>{}))}addEventToMainMedias(){addEventDelegate({selector:this.selectors.medias[0],context:this,handler:(e,t)=>{const i=t.classList.contains("media-type-image"),s=e.target.closest(this.selectors.mediaZoomIns[0]);if(i||s){const e=Number(t.dataset.index)||0;this.lightbox.openAt(e)}}})}setActiveMedia(e){if(e)if("slider"===this.mediaMode){if(e.featured_media){const t=e.featured_media.position||0;this.slider&&this.slider.wrapperEl&&this.slider.slideToLoop(t-1)}}else if("featured-image"===this.mediaMode){const t=e.featured_image.src,{featuredImage:i}=this.domNodes,s=i.querySelector("img");if(s&&t){s.src=t,s.removeAttribute("srcset");const a=this.productData.initialVariant.id===e.id?"add":"remove";i.classList[a]("group-hover:opacity-0")}}else if(e.featured_media){const t=this.querySelector(`[data-media-id="${e.featured_media.id}"]`);t&&this.scrollIntoView(t)}}scrollIntoView(e){e.scrollIntoView({behavior:"smooth"})}})}();